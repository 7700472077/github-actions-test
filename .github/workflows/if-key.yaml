name: Conditions
on: [push, pull_request]

jobs:
  functions:
    runs-on: ubuntu-latest
    # if: failure() ## a nivel de job - nem executa o job
    # continue-on-error: true ## a nivel de job - exibe o erro do step com falha e dá skip em todos os steps = finaliza "verde".
    # continue-on-error: false ## a nivel de job - exibe o erro do step com falha e dá skip em todos os steps = finaliza "vermelho"/ default.
    steps:
      - name: Only on Push - step 1
        if: github.event_name == 'push' ## a nivel de step - executa o step se receber a condição/evento esperado
        run: |
          eccho ${{ github.actor }}

      - name: Only on Push - step 2 
        # if: github.event_name == 'push' ## a nivel de step 
        ## NAO PODE HAVER 2 "if" dentro do mesmo step
        if: failure()
        ## Se o step anterior falhar (erro/log será exibido) e segue para o step contendo o "failure()"
        ## Se o step anterior der OK o step contendo o "failure()" não será executado.
        ##       

        # if: always() ## a nivel de step - exibe erro/log do step e dá skip nos demais - finaliza "vermelho". => condição default

        # continue-on-error: true # a nivel de step - ignora falha, exibe erro/log do step e segue para o prox step
            ## - finaliza "verde" se for o último step ou não tiver mais steps com falha.
        run: |
          echo "teste" > $HOME/teste_file.txt
        
      - name: Only on Push - step 3 
        run: |
          echo ${{ github.actor }}
          cat $HOME/teste_file.txt